<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"> 
<h:head>
     <title>User Register</title>
</h:head>
<body>
<h:form>
     <h1> Welcome to Dr Care</h1>
      
     <p:messages id="messages" showDetail="true" escape="false">
     	<p:autoUpdate />
     </p:messages>
      
   	 <h2>Create your account</h2>
    
     <p:outputLabel>Name</p:outputLabel>
   
    <p:inputText id="username" value="#{userBean.name}" label="username"        
		size="20" alt="username" autocomplete="off" readonly="false" required="true" requiredMessage="Username is required"/>
	
    <br></br>
    <p:outputLabel>Email</p:outputLabel>
    <p:inputText id="email" value="#{userBean.email}" label="email" alt="email" autocomplete="off" readonly="false" required="true"              
		requiredMessage="Email is required" validatorMessage="Email is invalid">
		    <f:validateRegex pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" />
	</p:inputText>
	<br></br>
    <p:outputLabel>Address</p:outputLabel>
    <p:inputText id="address" value="#{userBean.address}" label="address" maxlength="200" alt="address" autocomplete="off" readonly="false"/>  
  
   <br></br>   
   
   <p:outputLabel>Password</p:outputLabel>
   <p:password id="pwd" value="#{userBean.password}" label="pwd" alt="pwd" autocomplete="off" readonly="false" required="true" feedback="true"             
		requiredMessage="Password is required" validatorMessage="Password should contain minimum 6 characters">
		<f:validateLength minimum="6"/>
   </p:password>  
 
   <br></br>
   <p:outputLabel>Re-enter Password</p:outputLabel>
   <p:password id="re-pwd" value="#{userBean.passwordConfirmation}" label="re-pwd" maxlength="20" alt="re-pwd" autocomplete="off" readonly="false" required="true"              
		requiredMessage="Password is required"/>  

    <br></br>
    <p:outputLabel>Select Role</p:outputLabel>
    <p:selectOneMenu id="hard-dropdown" value="#{userBean.role}">
         <p:ajax update="licensePanel" />
      	 <f:selectItem itemValue="Patient" itemLabel="Patient"/>
   		 <f:selectItem itemValue="GP" itemLabel="GP"/>
   		 <f:selectItem itemValue="Pharmacist" itemLabel="Pharmacist"/>
	</p:selectOneMenu>
	
	<br></br>
	<p:outputPanel id="licensePanel">
		<p:outputLabel for="licenseNumber" rendered = "#{userBean.role == 'Pharmacist' || userBean.role == 'GP'}">License Number</p:outputLabel>
	   	<p:inputText id="licenseNumber" rendered = "#{userBean.role == 'Pharmacist' || userBean.role == 'GP'}" value="#{userBean.licenseNumber}" label="licenseNumber" minlength="9" maxlength="9"            
			size="20" alt="licenseNumber" autocomplete="off" readonly="false"            
			requiredMessage="License number is required"/>  	
	</p:outputPanel>
	<br/>
    <p:outputLabel>By creating an account you agree to our </p:outputLabel>
     <h:outputLink value="#" >Terms </h:outputLink>
	<br></br>
    <p:commandButton id="submit" styleClass="ActionButton" action="#{registrationController.addUser(userBean)}" value="Register" title="Register"/> 
    <br></br>
 	<p:outputLabel>Already have an account?</p:outputLabel>
   <h:outputLink value="index.jsf" >Sign in</h:outputLink> <br/>
  
</h:form>
</body>
</html>
