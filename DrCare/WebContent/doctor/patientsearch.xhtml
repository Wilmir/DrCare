<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">
	
	<!-- This template is for the list of patients for a GP -->
	<ui:composition>
		<h:form rendered="#{sessionScope.role == 'Doctor'}">
			<h3>Patient</h3>
			<h:panelGroup>
				<!-- Need a backing doctorBean that holds a Doctor object -->		
				
				<!--  Need a backing bean that holds the current Patient object -->
				<!--  I need a converter that converts the user ID into a user object -->
			    <!--<p:selectOneMenu value="#{doctorBean.currentPatient}"  -->
			    	<p:selectOneMenu value="#{doctorBean.currentPatient}"
			                     converter="#{userConverter}" 
			                     panelStyle="width: 180px"
			                     effect="fade" 
			                     var="patient" 
			                     style="width:180px" 
			                     filter="true" 
			                     filterMatchMode="startsWith"
			                     label = "Search for Patient">
			            <f:selectItems value="#{userListBean.patients}" 
			                           var="patient" 
			                           itemLabel="#{patient.theName}" 
			                           itemValue="#{patient.theID}" />
			        </p:selectOneMenu>
			    
			   	 <!-- Need a controller bean that will set the patient object of the PatientInfo bean  -->
			     <p:commandButton value="Show" 
			                      action="#{doctorController.show(doctorBean.currentPatient)}" />
			</h:panelGroup>
		</h:form>
	</ui:composition>
</html>
