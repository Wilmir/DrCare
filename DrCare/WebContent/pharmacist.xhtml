<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core">
	
<h:head>

<h:outputStylesheet library="css" name="pharmacist.css"></h:outputStylesheet>
<!--  <link rel="stylesheet" type="text/css" href="userpage.css"> -->

		
</h:head>
	
<body>
<h:form>
	<h:commandButton id="logout" styleClass="ActionButton"  action="#{loginController.logout}" value="logout" title="Log Out"/>
</h:form>
<h:panelGroup rendered="#{sessionScope.role == 'Pharmacist'}">
<h2 style="text-align:center">User Profile </h2>

<div class="card">
 <!--  <img src="#{resource['images/pharmacist.jpg']}" alt="pharmacist" style="width:100%"></img> --> 
  <h1>PHARMACIST</h1>
  <p>User Name : </p>
  <p>ID        : </p>
  <p>email     : </p>
  
  <div style="margin: 24px 0;">
    <a href="#"><i class="fa fa-ambulance"></i></a> 
    <a href="#"><i class="fa fa-plus-square"></i></a>  
    <a href="#"><i class="fa fa-user-md"></i></a>  
    <a href="#"><i class="fa fa-hospital-o"></i></a> 
  </div>
 <p><button>View Prescription</button></p>
 
		<h:form>
	 <h:dataTable value ="#{pharmacistController.prescriptions}" var = "prescription"
				 styleClass="prescriptionsTable"
				 headerClass="prescriptionsTableHeader"
				 columnClasses="yes">				
				
				<h:column>
					<f:facet name="header"> Patient</f:facet>
					<h:outputText value = "#{prescription.theName}" />
				</h:column>
							
				
				
				
				<h:column>
					<f:facet name="header"> Medicine</f:facet>
					<h:outputText value = "#{prescription.theItem.medicineName}" />
				</h:column>
				
				<h:column>
					<f:facet name="header"> Date Issued</f:facet>
					<h:outputText value = "#{prescription.theDatePrescribed}" />
				</h:column>
				
				<h:column>
					<f:facet name="header"> Prescription Status</f:facet>
					<h:outputText value = "#{prescription.theStatus}" />
				</h:column>
				
				
				<h:column>
				<f:facet name="header">Note</f:facet>
				<h:inputText value = "#{pharmacistController.getPrescriptionNote(prescription)}" rendered = "#{pharmacistController.getPrescriptionEdit(prescription)}"/>
				<h:outputText value="#{pharmacistController.getPrescriptionNote(prescription)}" rendered = "#{pharmacistController.getPrescriptionEdit(prescription)}" />
				<h:commandButton value="Edit Note" action="#{pharmacistController.enableEditNote(prescription)}" rendered="#{not prescription.canEditNote}"/>
				</h:column>
				
				<h:column>
					<f:facet name="header">Dispense</f:facet>
					<h:commandButton value="Dispense" action="#{pharmacistController.updateStatus(prescription)}"/>
				</h:column>
				
				
		</h:dataTable>
		</h:form>
		
  <p><button>Upload Videos about Medicine</button></p>
</div>
</h:panelGroup>

<h:panelGroup rendered="#{sessionScope.role != 'Pharmacist' or sessionScope == null}">
	<h1>You do not have access to this page. Return to <a href="login.jsf">Login</a></h1>
</h:panelGroup>
</body>
</html>
