<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<ui:composition>
		<h:panelGroup rendered="#{sessionScope.role == 'Patient'}">
		<div class="card">
			<img src="#{resource['images/patient.jpg']}" alt="pharmacist"
				style="width: 70%"></img>
			<h1>PATIENT</h1>
			<p>Name: #{patientInfoController.currentUser.theName}</p>
			<p>ID: #{patientInfoController.currentUser.theID}</p>
			<p>email: #{patientInfoController.currentUser.theEmail}</p>

			<div style="margin: 24px 0;">
				<a href="#"><i class="fa fa-ambulance"></i></a> <a href="#"><i
					class="fa fa-plus-square"></i></a> <a href="#"><i
					class="fa fa-user-md"></i></a> <a href="#"><i
					class="fa fa-hospital-o"></i></a>
			</div>
			<h:form>
				<p:dataTable value="#{patientInfoController.currentUser.prescriptions}" var="presc">
					<p:column headerText="Name">
						<h:outputText value="#{presc.theName}" />
					</p:column>
					<p:column headerText="Date Prescribed">
						<h:outputText value="#{presc.theDatePrescribed}" />
					</p:column>
					<p:column headerText="Amount">
						<h:outputText value="#{presc.theItem.subtotal}"/>
					</p:column>
					<p:column headerText="Status">
						<h:outputText value="#{presc.theStatus}"/>
					</p:column>
					<p:column headerText="Pay">
						<p:commandButton value="Pay" actionListener="#{authorisePayment.pay(presc)}" rendered="#{presc.theStatus == 'Waiting for payment'}"/>
					</p:column>
				</p:dataTable>
			</h:form>
		</div>
	</h:panelGroup>         
	</ui:composition>
</html>
